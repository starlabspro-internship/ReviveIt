@{
    ViewData["Title"] = "Sign Up Page";
}

@section Styles{
    <link href="~/css/SignUp.css" rel="stylesheet" />
}

@section Scripts{
    <script src="~/js/register.js"></script>
}

<div class="hero_area" style="height: auto;">
    <section class="slider_section">
        <div class="container d-flex justify-content-center pb-5">
            <section class="register_section">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12 mx-auto">
                            <div class="card p-4 shadow-lg">
                                <h3 class="text-center mb-4">Register at ReviveIt</h3>

                                <form id="registerForm" action="/Accounts/Register" method="post">
                                    <div class="form-group">
                                        <label for="role">Register As</label>
                                        <select id="role" name="role" class="form-control" onchange="toggleRoleFields()" required>
                                            <option value="">Select a role</option>
                                            <option value="Customer">Customer</option>
                                            <option value="Technician">Technician</option>
                                            <option value="Company">Company</option>
                                        </select>
                                    </div>

                                    <div class="form-group" id="nameField">
                                        <label for="name">Full Name</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-user"></i></span>
                                            </div>
                                            <input type="text" class="form-control" id="name" name="name" placeholder="Enter your full name">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="email">Email Address</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-envelope"></i></span>
                                            </div>
                                            <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email" required>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="password">Password</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-lock"></i></span>
                                            </div>
                                            <input type="password" class="form-control" id="password" name="password" placeholder="Create a password" required>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="confirm_password">Confirm Password</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-lock"></i></span>
                                            </div>
                                            <input type="password" class="form-control" id="confirm_password" name="confirm_password" placeholder="Confirm your password" required>
                                        </div>
                                    </div>

                                    <div id="technicianFields" style="display: none;">
                                        <div class="form-group">
                                            <label for="expertise">Expertise</label>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text"><i class="fas fa-cogs"></i></span> 
                                                </div>
                                                <input type="text" class="form-control" id="expertise" name="expertise" placeholder="Your field of expertise" required>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="experience">Years of Experience</label>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span> 
                                                </div>
                                                <input type="number" class="form-control" id="experience" name="experience" min="0" placeholder="Experience in years" required>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="companyFields" style="display: none;">
                                        <div class="form-group">
                                            <label for="companyName">Company Name</label>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text"><i class="fa fa-building"></i></span> 
                                                </div>
                                                <input type="text" class="form-control" id="companyName" name="companyName" placeholder="Enter company name" required>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="companyAddress">Company Address</label>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text"><i class="fa fa-map-marker-alt"></i></span> 
                                                </div>
                                                <input type="text" class="form-control" id="companyAddress" name="companyAddress" placeholder="Enter company address" required>
                                            </div>
                                        </div>
                                    </div>

                                    <button type="submit" class="btn btn-primary btn-block">Register</button>
                                </form>

                                <div id= "logInRedirect" class="text-center mt-3">
                                    <p>Already have an account? <a href="~/login">Login</a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </section>
</div>


<script>
    function toggleRoleFields() {
        const role = document.getElementById("role").value;

        const technicianFields = document.getElementById("technicianFields");
        const companyFields = document.getElementById("companyFields");

        technicianFields.style.display = role === "Technician" ? "block" : "none";
        companyFields.style.display = role === "Company" ? "block" : "none";

        document.getElementById("expertise").required = (role === "Technician");
        document.getElementById("experience").required = (role === "Technician");
        document.getElementById("companyName").required = (role === "Company");
        document.getElementById("companyAddress").required = (role === "Company");

        const nameField = document.getElementById("nameField");
        nameField.style.display = role === "Company" ? "none" : "block";
    }
</script>
